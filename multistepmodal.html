  <!DOCTYPE html>
  <html lang="en">
  <head>
    <title>Multi-step Modal</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <style>


      .package_form {
        background-color: #ffffff;
        font-family: Raleway;
        padding: 40px;
        width: 100%;
        min-width: 300px;
      }

      input {
        padding: 10px;
        width: 100%;
        font-size: 17px;
        font-family: Raleway;
        border: 1px solid #aaaaaa;
      }

      /* Mark input boxes that gets an error on validation: */
      input.invalid {
        background-color: #ffdddd;
      }

      /* Hide all steps by default: */
      .tab {
        display: none;
      }
      .tab1 {
        display: none;
      }
      .shipment_qty{
        width: 20%;
      }
      .item_description{
        width: 30%;
      }

      button:hover {
        opacity: 0.8;
      }

      /* Make circles that indicate the steps of the form: */
      .step {
        height: 15px;
        width: 15px;
        margin: 0 2px;
        background-color: #bbbbbb;
        border: none;  
        border-radius: 50%;
        display: inline-block;
        opacity: 0.5;
      }
      .top_margin{
        margin-top: 5px;
      }

      .step.active {
        opacity: 1;
      }

      /* Mark the steps that are finished and valid: */
      .step.finish {
        background-color: #4CAF50;
      }
      .tab_content{
        margin-left: 20px;
      }
    </style>
  </head>
  <body>

    <div class="container">
      <h2>Modal Example</h2>
      <!-- Trigger the modal with a button -->
      <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#packageInfoModal">Open Modal</button>

      <!-- Modal -->
      <div class="modal fade" id="packageInfoModal" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <div class="tab1">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Package Information</h4>
              </div>
              <div class="tab1">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Ship To</h4>
              </div>
              <div class="tab1">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Ship From</h4>
              </div>
              <div class="tab1">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Select Shipping Rate</h4>
              </div>
              <div class="tab1">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Select Carrier</h4>
              </div>
            </div>
            <div class="modal-body order_details_body">
              <div id="packageForm" class="package_form">

                <!-- One "tab" for each step in the form: -->
                <div class="tab">
                  <table class="table table-responsive">
                    <thead>
                      <tr>
                        <th>Item</th>
                        <th>To be Fulfilled</th>
                        <th>In this Shipment</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="item_description">xyz</td>
                        <td class="shipment_qty">2</td>
                        <td class="shipment_qty"><input type="number" class="form-control"></td>
                      </tr>
                    </tbody>
                  </table>
      <h4>Package Information:</h4><hr>
      <div class="tab_content">
        <div class="row">
          <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="packageType">Package Type </label><span class="text-danger">*</span></div>
          <div class="col-md-8 col-sm-8 col-xs-8"><select class="form-control" id="packageType">
            <option value="-1">Select Package Type</option>
            <option value="1">Abc</option>
            <option value="2">Def</option>
            </select>
          </div>
        </div>
        <div class="row top_margin">
          <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="length">Length </label><span class="text-danger">*</span></div>
          <div class="col-md-6 col-sm-6 col-xs-6"><input type="number" id="length" class="form-control mandatory_detail" >
          </div>
          <div class="col-md-2 col-sm-2 col-xs-2 text-left">cm</div>
        </div>
        <div class="row top_margin">
          <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="width">Width <span class="text-danger">*</span></label></div>
          <div class="col-md-6 col-sm-6 col-xs-6"><input type="number" class="form-control mandatory_detail" id="width" >
          </div>
          <div class="col-md-2 col-sm-2 col-xs-2 text-left">cm</div>
        </div>
        <div class="row top_margin">
          <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="height">Height <span class="text-danger">*</span></label></div>
          <div class="col-md-6 col-sm-6 col-xs-6"><input type="number" class="form-control mandatory_detail" id="height" >
          </div>
          <div class="col-md-2 col-sm-2 col-xs-2 text-left">cm</div>
        </div>
        <div class="row top_margin">
          <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="weight">Weight <span class="text-danger">*</span></label></div>
          <div class="col-md-6 col-sm-6 col-xs-6"><input type="number" class="form-control mandatory_detail" id="weight" >
          </div>
          <div class="col-md-2 col-sm-2 col-xs-2 text-left">gms</div>
        </div>
      </div>
      <hr>
      <h4>Shipment Details:</h4><hr>
      <div class="tab_content">
          <div class="row top_margin">
            <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="dispatchDate">Ship Date <span class="text-danger">*</span></label></div>
            <div class="col-md-8 col-sm-8 col-xs-8"><input type="date" class="form-control mandatory_detail" id="dispatchDate">
            </div>
          </div>
      </div>
      </div>

          <div class="tab">
              <h4>Receipient Details:</h4><hr>
              <div class="tab_content">
                <div class="row top_margin">
                  <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="receipient_name">Name <span class="text-danger">*</span></label></div>
                  <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="receipient_name">
                  </div>
              </div>
              <div class="row top_margin">
                  <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="receipient_companyname">Company <span class="text-danger">*</span></label></div>
                  <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="receipient_companyname" >
                  </div>
              </div>
              <div class="row top_margin">
                  <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="receipient_email">Email <span class="text-danger">*</span></label></div>
                  <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="receipient_email">
                  </div>
              </div>
              <div class="row top_margin">
                  <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="receipient_contactno">Phone Number </label></div>
                  <div class="col-md-8 col-sm-8 col-xs-8"><input type="number" class="form-control" id="receipient_contactno" >
                  </div>
              </div>
          </div>
          <hr>
          <h4> Address Details:</h4><hr>
          <div class="tab_content">
            <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="shipToStreet">Street <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="shipToStreet" >
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="shipToCity">City <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="shipToCity" >
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="shipToState">State <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="shipToState" >
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="shipToPIN">Zip Code <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="number" class="form-control mandatory_detail" id="shipToPIN" >
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="shipToCountry">Country <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="shipToCountry">
              </div>
          </div>
      </div>
      </div>
      <div class="tab">
          <h4>Ship From:</h4><hr>
          <div class="tab_content">
            <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="dispatchStreet">Street <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="dispatchStreet">
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="dispatchCity">City <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="dispatchCity" >
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="dispatchState">State <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="dispatchState" >
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="dispatchZipcode">Zip Code <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="dispatchZipcode">
              </div>
          </div>
          <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="dispatchCountry">Country <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8"><input type="text" class="form-control mandatory_detail" id="dispatchCountry" >
              </div>
          </div>
      </div>

      </div>
      <div class="tab">
          <div class="tab_content">
            <div class="row top_margin">
              <div class="col-md-4 col-sm-4 col-xs-4 text-right"><label for="labelFormat">Carrier <span class="text-danger">*</span></label></div>
              <div class="col-md-8 col-sm-8 col-xs-8">
                <select class="form-control" id="labelFormat">
                  <option value="-1">Select Carrier</option>
                  <option value="1">Abcd</option>
                  <option value="2">Efgh</option>
              </select>
          </div>
      </div>
      </div>
      <div class="tab_content">
        <hr>
        <h4>Shipping Rates</h4>
        <div class="table-responsive ">
          <table class="table table-hover">
            <tr>
              <td>img</td>
              <td>USPS Priority Mall</td>
              <td>1 Day</td>
              <td>$15.5</td>
              <td><button type="button" class="btn btn-primary">Buy Label</button></td>
          </tr>
      </table>
      </div>
      </div>
      </div>
            <div style="overflow:auto;">
              <div style="float:right;">

              </div>
              <!-- Circles which indicates the steps of the form: -->
              <div style="text-align:center;margin-top:40px;">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
              </div>
            </div>
            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn " id="prevBtn" onclick="nextPrev(-1)" style="float: left">Back</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-success" id="nextBtn" onclick="nextPrev(1)">Next</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  </div>

  </body>
  <script>
  var currentTab = 0; // Current tab is set to be the first tab (0)
  showTab(currentTab); // Display the current tab

  function showTab(n) {
    // This function will display the specified tab of the form...
    var x = $(".tab");
    var y = $(".tab1");
    y[n].style.display = "block";
    x[n].style.display = "block";
    //... and fix the Previous/Next buttons:
    if (n == 0) {
      $("#prevBtn").hide();
    } else {
      $("#prevBtn").show();
    }
    if (n == (x.length - 1)) {
      $("#nextBtn").html("Done");
    } else {
      $("#nextBtn").html("Next");
    }
    //... and run a function that will display the correct step indicator:
    fixStepIndicator(n)
  }

  function nextPrev(n) {
    // This function will figure out which tab to display
    var x = $(".tab");
    var y = $(".tab1");
    // Exit the function if any field in the current tab is invalid:
    if (n == 1 && !validateForm()) return false;
    // Hide the current tab:
    x[currentTab].style.display = "none";
    y[currentTab].style.display = "none";
    // Increase or decrease the current tab by 1:
    currentTab = currentTab + n;
    // if you have reached the end of the form...
    if (currentTab == x.length) {
      // ... the form gets submitted:
      var packageType = $("#packageType option:selected").text();
      var length = $("#length").val();
      var width = $("#width").val();

      var formData = {
        "packageType": packageType,
        "length": length,
        "width" : width
      };
      submitForm(JSON.stringify(formData));
      x[currentTab-1].style.display = "inline";
      y[currentTab-1].style.display = "inline";
      $("#nextBtn").attr("disabled","true");
      $("#prevBtn").attr("disabled","true");
      return false;
    }
    else{
      // Otherwise, display the correct tab:
      showTab(currentTab);
    }
    
  }

  function validateForm() {
    // This function deals with validation of the form fields
    var x, y, i, valid = true;
    x = $(".tab");
    y = x[currentTab].getElementsByClassName("mandatory_detail");
    // A loop that checks every input field in the current tab:
    for (i = 0; i < y.length; i++) {
      // If a field is empty...
      if (y[i].value == "") {
        alert("Please fill all the mandatoy fields");
        // add an "invalid" class to the field:
        y[i].className += " invalid";
        // and set the current valid status to false
        valid = false;
        return false;
      }
    }
    // If the valid status is true, mark the step as finished and valid:
    if (valid) {
      document.getElementsByClassName("step")[currentTab].className += " finish";
    }
    return valid; // return the status
  }

  function fixStepIndicator(n) {
    // It removes the "active" class of all steps...
    var i, x = document.getElementsByClassName("step");
    for (i = 0; i < x.length; i++) {
      x[i].className = x[i].className.replace(" active", "");
    }
    //... and adds the "active" class on the current step:
    x[n].className += " active";
  }


  function submitForm(data){
    console.log("submitted"+data);
    alert("submitted");
  }

  $(document).ready(function(){
      // codes works on all bootstrap modal windows in application
      $('.modal').on('hidden.bs.modal', function() {
        var x = $(".tab");
          console.log("you're inside hidden.bd.modal");
          $(this).find("input,textarea").val('').end()
          .find("select").val('-1').end()
          .find("input[type=checkbox], input[type=radio]").prop("checked", "").end();
          if(currentTab == x.length){
            $(".tab1")[currentTab - 1].style.display = "none";
            $(".tab")[currentTab - 1].style.display = "none";
          }
          else{
            $(".tab1")[currentTab].style.display = "none";
            $(".tab")[currentTab].style.display = "none";
          }
          $("#nextBtn").removeAttr("disabled");
          $("#prevBtn").removeAttr("disabled");
          currentTab = 0;
          showTab(currentTab);
      });
  });



 
  </script>
  </html>
